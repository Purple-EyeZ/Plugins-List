(()=>{var tt=Object.create;var Ne=Object.defineProperty;var nt=Object.getOwnPropertyDescriptor;var rt=Object.getOwnPropertyNames;var at=Object.getPrototypeOf,st=Object.prototype.hasOwnProperty;var Ie=Math.pow;var it=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var ot=(e,n,i,l)=>{if(n&&typeof n=="object"||typeof n=="function")for(let v of rt(n))!st.call(e,v)&&v!==i&&Ne(e,v,{get:()=>n[v],enumerable:!(l=nt(n,v))||l.enumerable});return e};var lt=(e,n,i)=>(i=e!=null?tt(at(e)):{},ot(n||!e||!e.__esModule?Ne(i,"default",{value:e,enumerable:!0}):i,e));var te=(e,n,i)=>new Promise((l,v)=>{var m=I=>{try{b(i.next(I))}catch(T){v(T)}},g=I=>{try{b(i.throw(I))}catch(T){v(T)}},b=I=>I.done?l(I.value):Promise.resolve(I.value).then(m,g);b((i=i.apply(e,n)).next())});var qe=it((Ae,pe)=>{((e,n)=>{typeof define=="function"&&define.amd?define([],n):typeof pe=="object"&&pe.exports?pe.exports=n():e.fuzzysort=n()})(Ae,e=>{"use strict";var n=(r,t)=>{if(!r||!t)return $;var a=ae(r);R(t)||(t=O(t));var c=a.bitflags;return(c&t._bitflags)!==c?$:j(a,t)},i=(r,t,a)=>{if(!r)return a!=null&&a.all?ce(t,a):Ee;var c=ae(r),u=c.bitflags,o=c.containsSpace,s=S((a==null?void 0:a.threshold)||0),f=(a==null?void 0:a.limit)||Be,d=0,h=0,y=t.length;function N(ee){d<f?(ge.add(ee),++d):(++h,ee._score>ge.peek()._score&&ge.replaceTop(ee))}if(a!=null&&a.key)for(var F=a.key,x=0;x<y;++x){var M=t[x],_=ve(M,F);if(_&&(R(_)||(_=O(_)),(u&_._bitflags)===u)){var B=j(c,_);B!==$&&(B._score<s||(B.obj=M,N(B)))}}else if(a!=null&&a.keys){var G=a.keys,z=G.length;e:for(var x=0;x<y;++x){var M=t[x];{for(var U=0,w=0;w<z;++w){var F=G[w],_=ve(M,F);if(!_){Le[w]=se;continue}R(_)||(_=O(_)),Le[w]=_,U|=_._bitflags}if((u&U)!==u)continue}if(o)for(let L=0;L<c.spaceSearches.length;L++)V[L]=A;for(var w=0;w<z;++w){if(_=Le[w],_===se){re[w]=se;continue}if(re[w]=j(c,_,!1,o),re[w]===$){re[w]=se;continue}if(o)for(let E=0;E<c.spaceSearches.length;E++){if(Z[E]>-1e3&&V[E]>A){var P=(V[E]+Z[E])/4;P>V[E]&&(V[E]=P)}Z[E]>V[E]&&(V[E]=Z[E])}}if(o){for(let L=0;L<c.spaceSearches.length;L++)if(V[L]===A)continue e}else{var p=!1;for(let L=0;L<z;L++)if(re[L]._score!==A){p=!0;break}if(!p)continue}var q=new b(z);for(let L=0;L<z;L++)q[L]=re[L];if(o){var k=0;for(let L=0;L<c.spaceSearches.length;L++)k+=V[L]}else{var k=A;for(let E=0;E<z;E++){var B=q[E];if(B._score>-1e3&&k>A){var P=(k+B._score)/4;P>k&&(k=P)}B._score>k&&(k=B._score)}}if(q.obj=M,q._score=k,a!=null&&a.scoreFn){if(k=a.scoreFn(q),!k)continue;k=S(k),q._score=k}k<s||N(q)}}else for(var x=0;x<y;++x){var _=t[x];if(_&&(R(_)||(_=O(_)),(u&_._bitflags)===u)){var B=j(c,_);B!==$&&(B._score<s||N(B))}}if(d===0)return Ee;for(var K=new Array(d),x=d-1;x>=0;--x)K[x]=ge.poll();return K.total=d+h,K},l=(r,t="<b>",a="</b>")=>{for(var c=typeof t=="function"?t:void 0,u=r.target,o=u.length,s=r.indexes,f="",d=0,h=0,y=!1,N=[],F=0;F<o;++F){var x=u[F];if(s[h]===F){if(++h,y||(y=!0,c?(N.push(f),f=""):f+=t),h===s.length){c?(f+=x,N.push(c(f,d++)),f="",N.push(u.substr(F+1))):f+=x+a+u.substr(F+1);break}}else y&&(y=!1,c?(N.push(c(f,d++)),f=""):f+=a);f+=x}return c?N:f},v=r=>{typeof r=="number"?r=""+r:typeof r!="string"&&(r="");var t=we(r);return I(r,{_targetLower:t._lower,_targetLowerCodes:t.lowerCodes,_bitflags:t.bitflags})},m=()=>{xe.clear(),_e.clear()};class g{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((t,a)=>t-a)}set indexes(t){return this._indexes=t}highlight(t,a){return l(this,t,a)}get score(){return T(this._score)}set score(t){this._score=S(t)}}class b extends Array{get score(){return T(this._score)}set score(t){this._score=S(t)}}var I=(r,t)=>{var c,u,o,s,f,d,h;let a=new g;return a.target=r,a.obj=(c=t.obj)!=null?c:$,a._score=(u=t._score)!=null?u:A,a._indexes=(o=t._indexes)!=null?o:[],a._targetLower=(s=t._targetLower)!=null?s:"",a._targetLowerCodes=(f=t._targetLowerCodes)!=null?f:$,a._nextBeginningIndexes=(d=t._nextBeginningIndexes)!=null?d:$,a._bitflags=(h=t._bitflags)!=null?h:0,a},T=r=>r===A?0:r>1?r:Ie(Math.E,(Ie(-r+1,.04307)-1)*-2),S=r=>r===0?A:r>1?r:1-Math.pow(Math.log(r)/-2+1,1/.04307),C=r=>{typeof r=="number"?r=""+r:typeof r!="string"&&(r=""),r=r.trim();var t=we(r),a=[];if(t.containsSpace){var c=r.split(/\s+/);c=[...new Set(c)];for(var u=0;u<c.length;u++)if(c[u]!==""){var o=we(c[u]);a.push({lowerCodes:o.lowerCodes,_lower:c[u].toLowerCase(),containsSpace:!1})}}return{lowerCodes:t.lowerCodes,_lower:t._lower,containsSpace:t.containsSpace,bitflags:t.bitflags,spaceSearches:a}},O=r=>{if(r.length>999)return v(r);var t=xe.get(r);return t!==void 0||(t=v(r),xe.set(r,t)),t},ae=r=>{if(r.length>999)return C(r);var t=_e.get(r);return t!==void 0||(t=C(r),_e.set(r,t)),t},ce=(r,t)=>{var a=[];a.total=r.length;var c=(t==null?void 0:t.limit)||Be;if(t!=null&&t.key)for(var u=0;u<r.length;u++){var o=r[u],s=ve(o,t.key);if(s!=$){R(s)||(s=O(s));var f=I(s.target,{_score:s._score,obj:o});if(a.push(f),a.length>=c)return a}}else if(t!=null&&t.keys)for(var u=0;u<r.length;u++){for(var o=r[u],d=new b(t.keys.length),h=t.keys.length-1;h>=0;--h){var s=ve(o,t.keys[h]);if(!s){d[h]=se;continue}R(s)||(s=O(s)),s._score=A,s._indexes.len=0,d[h]=s}if(d.obj=o,d._score=A,a.push(d),a.length>=c)return a}else for(var u=0;u<r.length;u++){var s=r[u];if(s!=$&&(R(s)||(s=O(s)),s._score=A,s._indexes.len=0,a.push(s),a.length>=c))return a}return a},j=(r,t,a=!1,c=!1)=>{if(a===!1&&r.containsSpace)return ue(r,t,c);for(var u=r._lower,o=r.lowerCodes,s=o[0],f=t._targetLowerCodes,d=o.length,h=f.length,x=0,y=0,N=0;;){var F=s===f[y];if(F){if(Y[N++]=y,++x,x===d)break;s=o[x]}if(++y,y>=h)return $}var x=0,M=!1,_=0,B=t._nextBeginningIndexes;B===$&&(B=t._nextBeginningIndexes=Ze(t.target)),y=Y[0]===0?0:B[Y[0]-1];var G=0;if(y!==h)for(;;)if(y>=h){if(x<=0||(++G,G>200))break;--x;var z=de[--_];y=B[z]}else{var F=o[x]===f[y];if(F){if(de[_++]=y,++x,x===d){M=!0;break}++y}else y=B[y]}var U=d<=1?-1:t._targetLower.indexOf(u,Y[0]),w=!!~U,P=w?U===0||t._nextBeginningIndexes[U-1]===U:!1;if(w&&!P){for(var p=0;p<B.length;p=B[p])if(!(p<=U)){for(var q=0;q<d&&o[q]===t._targetLowerCodes[p+q];q++);if(q===d){U=p,P=!0;break}}}var k=L=>{for(var E=0,Me=0,W=1;W<d;++W)L[W]-L[W-1]!==1&&(E-=L[W],++Me);var et=L[d-1]-L[0]-(d-1);if(E-=(12+et)*Me,L[0]!==0&&(E-=L[0]*L[0]*.2),!M)E*=1e3;else{for(var Se=1,W=B[0];W<h;W=B[W])++Se;Se>24&&(E*=(Se-24)*10)}return E-=(h-d)/2,w&&(E/=1+d*d*1),P&&(E/=1+d*d*1),E-=(h-d)/2,E};if(M)if(P){for(var p=0;p<d;++p)Y[p]=U+p;var K=Y,ee=k(Y)}else var K=de,ee=k(de);else{if(w)for(var p=0;p<d;++p)Y[p]=U+p;var K=Y,ee=k(K)}t._score=ee;for(var p=0;p<d;++p)t._indexes[p]=K[p];t._indexes.len=d;let me=new g;return me.target=t.target,me._score=t._score,me._indexes=t._indexes,me},ue=(r,t,a)=>{for(var c=new Set,u=0,o=$,s=0,f=r.spaceSearches,d=f.length,h=0,y=()=>{for(let P=h-1;P>=0;P--)t._nextBeginningIndexes[fe[P*2+0]]=fe[P*2+1]},N=!1,w=0;w<d;++w){Z[w]=A;var F=f[w];if(o=j(F,t),a){if(o===$)continue;N=!0}else if(o===$)return y(),$;var x=w===d-1;if(!x){var M=o._indexes,_=!0;for(let p=0;p<M.len-1;p++)if(M[p+1]-M[p]!==1){_=!1;break}if(_){var B=M[M.len-1]+1,G=t._nextBeginningIndexes[B-1];for(let p=B-1;p>=0&&G===t._nextBeginningIndexes[p];p--)t._nextBeginningIndexes[p]=B,fe[h*2+0]=p,fe[h*2+1]=G,h++}}u+=o._score/d,Z[w]=o._score/d,o._indexes[0]<s&&(u-=(s-o._indexes[0])*2),s=o._indexes[0];for(var z=0;z<o._indexes.len;++z)c.add(o._indexes[z])}if(a&&!N)return $;y();var U=j(r,t,!0);if(U!==$&&U._score>u){if(a)for(var w=0;w<d;++w)Z[w]=U._score/d;return U}a&&(o=t),o._score=u;var w=0;for(let P of c)o._indexes[w++]=P;return o._indexes.len=w,o},Ue=r=>r.replace(new RegExp("\\p{Script=Latin}+","gu"),t=>t.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),we=r=>{r=Ue(r);for(var t=r.length,a=r.toLowerCase(),c=[],u=0,o=!1,s=0;s<t;++s){var f=c[s]=a.charCodeAt(s);if(f===32){o=!0;continue}var d=f>=97&&f<=122?f-97:f>=48&&f<=57?26:f<=127?30:31;u|=1<<d}return{lowerCodes:c,bitflags:u,containsSpace:o,_lower:a}},Xe=r=>{for(var t=r.length,a=[],c=0,u=!1,o=!1,s=0;s<t;++s){var f=r.charCodeAt(s),d=f>=65&&f<=90,h=d||f>=97&&f<=122||f>=48&&f<=57,y=d&&!u||!o||!h;u=d,o=h,y&&(a[c++]=s)}return a},Ze=r=>{r=Ue(r);for(var t=r.length,a=Xe(r),c=[],u=a[0],o=0,s=0;s<t;++s)u>s?c[s]=u:(u=a[++o],c[s]=u===void 0?t:u);return c},xe=new Map,_e=new Map,Y=[],de=[],fe=[],V=[],Z=[],Le=[],re=[],ve=(r,t)=>{var a=r[t];if(a!==void 0)return a;if(typeof t=="function")return t(r);var c=t;Array.isArray(t)||(c=t.split("."));for(var u=c.length,o=-1;r&&++o<u;)r=r[c[o]];return r},R=r=>typeof r=="object"&&typeof r._bitflags=="number",Be=1/0,A=-Be,Ee=[];Ee.total=0;var $=null,se=v(""),Re=r=>{var t=[],a=0,c={},u=o=>{for(var s=0,f=t[s],d=1;d<a;){var h=d+1;s=d,h<a&&t[h]._score<t[d]._score&&(s=h),t[s-1>>1]=t[s],d=1+(s<<1)}for(var y=s-1>>1;s>0&&f._score<t[y]._score;y=(s=y)-1>>1)t[s]=t[y];t[s]=f};return c.add=o=>{var s=a;t[a++]=o;for(var f=s-1>>1;s>0&&o._score<t[f]._score;f=(s=f)-1>>1)t[s]=t[f];t[s]=o},c.poll=o=>{if(a!==0){var s=t[0];return t[0]=t[--a],u(),s}},c.peek=o=>{if(a!==0)return t[0]},c.replaceTop=o=>{t[0]=o,u()},c},ge=Re();return{single:n,go:i,prepare:v,cleanup:m}})});var ze=lt(qe(),1),ct=150,he={currentValue:"",wasCleared:!1},J={searchBar:document.getElementById("search-bar"),fixedSearchBar:document.getElementById("fixedSearchBar"),clearButton:document.getElementById("clearSearch"),clearButtonFixed:document.getElementById("clearFixedSearch"),searchButton:document.getElementById("searchButton"),container:document.getElementById("plugins-container")||document.getElementById("plugins-list"),featuredPluginContainer:document.getElementById("featured-plugin-container")},Q=[];function ut(e,n){let i;return(...l)=>(clearTimeout(i),new Promise(v=>{i=setTimeout(()=>v(e(...l)),n)}))}function ie(e){return e?e.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim():""}function He(e){var T;let n=J.container.id==="plugins-list",i=n?"admin-plugin-item":"plugin-card",l=Array.from(J.container.getElementsByClassName(i));(Q.length===0||Q.length!==l.length||Q.length>0&&!Q[0].element.isConnected)&&(Q=l.map(S=>{var O,ae,ce,j,ue;let C={element:S};return n?(C.name=ie((O=S.querySelector(".plugin-info span:nth-child(2)"))==null?void 0:O.textContent),C.warningMessage=(ae=S.querySelector(".warning-message"))==null?void 0:ae.value):(C.name=ie((ce=S.querySelector(".plugin-name"))==null?void 0:ce.textContent),C.description=ie((j=S.querySelector(".plugin-description"))==null?void 0:j.textContent),C.author=ie((ue=S.querySelector(".plugin-author"))==null?void 0:ue.textContent)),C}));let m=ie(e);if(!m){for(let{element:S}of Q)S.style.display=n?"block":"flex";if(!n)(T=window.renderPlugins)==null||T.call(window);else for(let S of l)J.container.appendChild(S);De("",l.length);return}let g=n?["name","warningMessage"]:["name","author","description"],b=ze.default.go(m,Q,{keys:g});for(let{element:S}of Q)S.style.display="none";let I=[];for(let S of b){let{element:C}=S.obj;C.style.display=n?"block":"flex",J.container.appendChild(C),I.push(C)}De(e,I.length)}function De(e,n){let i=document.getElementById("searchSubtext");if(!i)return;if(!e){i.textContent="",i.classList.remove("visible");return}let l=typeof n=="number"?n:n.filter(m=>m.style.display!=="none").length,v=`Found ${l} matching plugin${l===1?"":"s"}`;i.textContent=v,i.classList.add("visible")}function Oe(e){if(J.featuredPluginContainer){let n=J.featuredPluginContainer.querySelector(".featured-plugin-card");n&&e&&e.trim()!==""&&n.classList.contains("expanded")&&n.classList.remove("expanded")}}function dt(){let{searchBar:e,fixedSearchBar:n,clearButton:i,clearButtonFixed:l}=J,v=g=>{let b=g.target.value;he.currentValue=b,he.wasCleared=!1,vt(b),ke(g.target,b);let I=g.target===e?n:e;I.value=b,ke(I,b),Oe(b)};for(let g of[e,n])g&&g.addEventListener("input",v);let m=g=>{he.currentValue="",he.wasCleared=!0;for(let b of[e,n])b.value="",ke(b,"");He(""),Oe(""),g.focus()};for(let{button:g,input:b}of[{button:i,input:e},{button:l,input:n}])g&&g.addEventListener("click",()=>m(b))}function ke(e,n){let i=J[e.id==="search-bar"?"clearButton":"clearButtonFixed"];if(!i)return;let l=n.length>0&&(e.id!=="fixedSearchBar"||e.classList.contains("show"));i.style.display=l?"block":"none"}function ft(){let{searchButton:e,fixedSearchBar:n,clearButtonFixed:i}=J;e==null||e.addEventListener("click",()=>{let l=n.classList.contains("hidden");n.classList.toggle("hidden",!l),n.classList.toggle("show",l),l?(n.focus(),i.style.display=n.value.length>0?"block":"none"):i.style.display="none"})}var oe=document.getElementById("fixedSearchBar");oe&&(oe.addEventListener("focus",()=>{oe.dataset.isFocused="true"}),oe.addEventListener("blur",()=>{oe.dataset.isFocused="false"}));var je=()=>{var e;return((e=document.getElementById("fixedSearchBar"))==null?void 0:e.dataset.isFocused)==="true"},vt=ut(He,ct);document.addEventListener("DOMContentLoaded",()=>{dt(),ft()});var Ye=window.scrollY,ne=document.querySelector(".fixed-banner"),be=document.getElementById("backToTopButton"),$e=document.getElementById("menuButton"),Ce=document.getElementById("dropdownMenu");function Ve(){if(!ne)return;let e=15,n=window.scrollY,i=n>Ye;Ye=n;let l=n>e&&!ne.classList.contains("show"),v=n<=e&&ne.classList.contains("show")&&!je()&&!i;l?(ne.classList.add("show"),ne.classList.remove("hide")):v&&(ne.classList.add("hide"),ne.classList.remove("show"))}be&&(window.addEventListener("scroll",()=>{window.scrollY>300?be.classList.add("show"):be.classList.remove("show")}),be.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));document.addEventListener("DOMContentLoaded",()=>{$e.addEventListener("click",()=>{Ce.classList.toggle("visible")}),window.addEventListener("click",e=>{e.target!==$e&&!$e.contains(e.target)&&!Ce.contains(e.target)&&Ce.classList.remove("visible")})});function H(e){let n=document.getElementById("toast");n.innerHTML=e,n.classList.add("show"),setTimeout(()=>n.classList.remove("show"),2e3)}function Te({title:e,message:n,infoBox:i=null,primaryButton:l={text:"OK",action:()=>Pe()},secondaryButton:v={text:"Cancel",action:()=>Pe()},closeOnOutsideClick:m=!0}){let g=document.getElementById("custom-popup");g||(g=document.createElement("div"),g.id="custom-popup",g.classList.add("popup-container"),document.body.appendChild(g)),g.innerHTML=`
        <div class="card popup-content">
            <div class="popup-title">${e}</div>
            <div class="popup-message">${n}</div>
            ${i?`<div class="popup-info-box">${i.replace(/\n/g,"<br>")}</div>`:""}
            <div class="popup-buttons">
                ${v?`<button class="btn btn--secondary popup-secondary-button" id="popup-secondary-btn">${v.text}</button>`:""}
                <button class="btn btn--primary popup-primary-button" id="popup-primary-btn">${l.text}</button>
            </div>
        </div>
    `,document.getElementById("popup-primary-btn").addEventListener("click",b=>{b.stopPropagation(),l.action()}),v&&document.getElementById("popup-secondary-btn").addEventListener("click",b=>{b.stopPropagation(),v.action()}),m&&(g.querySelector(".popup-content").addEventListener("click",b=>{b.stopPropagation()}),g.addEventListener("click",()=>{Pe()})),g.style.display="flex",window.hidePopup=()=>{g.style.display="none"}}function Pe(){let e=document.getElementById("custom-popup");e&&(e.style.display="none")}function gt(){window.location.href.toLowerCase().includes("purple-eyez.github.io/plugins-list")&&Te({title:"Migration Notice",message:"This website is moving to a new address!",primaryButton:{text:"Take Me There",action:()=>{window.location.href="https://plugins-list.pages.dev/"}},secondaryButton:null,closeOnOutsideClick:!1})}function mt(){Ve(),window.addEventListener("scroll",Ve)}window.onload=()=>{gt(),mt()};var pt="../plugins-data.json",D=[],le="all",We=document.getElementById("plugins-list"),ht=document.getElementById("add-plugin-form"),Je=document.getElementById("new-plugin-url"),bt=document.getElementById("save-changes"),yt=document.getElementById("check-plugins"),Fe=document.getElementById("filter-all"),Ge=document.getElementById("filter-broken"),Ke=document.getElementById("filter-warning"),wt=document.getElementById("total-count"),xt=document.getElementById("working-count"),_t=document.getElementById("warning-count"),Lt=document.getElementById("broken-count");function Bt(){return te(this,null,function*(){try{D=yield(yield fetch(pt)).json(),X(),ye()}catch(e){H(`Error loading plugins: ${e.message}`)}})}function Qe(e){if(e=e.replace(/\/$/,""),e.includes("/proxy/")){let n=e.split("/proxy/")[1];if(n){let i=n.match(/([^.]+)\.github\.io\/([^/]+)/);if(i){let[,v,m]=i;return`https://github.com/${v}/${m}`}let l=n.match(/raw\.githubusercontent\.com\/([^/]+)\/([^/]+)/);if(l){let[,v,m]=l;return`https://github.com/${v}/${m}`}}}if(e.includes("github.io")){let n=e.match(/https?:\/\/([^.]+)\.github\.io\/([^/]+)/);if(n){let[,i,l]=n;return`https://github.com/${i}/${l}`}}if(e.includes("raw.githubusercontent.com")){let n=e.match(/https?:\/\/raw\.githubusercontent\.com\/([^/]+)\/([^/]+)/);if(n){let[,i,l]=n;return`https://github.com/${i}/${l}`}}return e}function Et(){return te(this,null,function*(){var v;console.group("Updating plugin manifests...");let e=0,n=0,i=D.length,l=0;for(let m of D)try{let g=m.installUrl,b=g.endsWith("/")?`${g}manifest.json`:`${g}/manifest.json`;console.log(`Fetching manifest for ${m.name}... (${++l}/${i})`);let I=yield fetch(b);if(!I.ok)throw new Error(`HTTP error! status: ${I.status}`);let T=yield I.json(),S=[];T.name!==m.name&&(S.push(`name: ${m.name} -> ${T.name}`),m.name=T.name),T.description!==m.description&&(S.push("description updated"),m.description=T.description);let C=((v=T.authors)==null?void 0:v.map(O=>O.name))||["Unknown"];JSON.stringify(C)!==JSON.stringify(m.authors)&&(S.push(`authors: [${m.authors}] -> [${C}]`),m.authors=C),S.length>0?(console.log(`\u2705 ${m.name}: Updated! Changes:`,S),e++):console.log(`\u2139\uFE0F ${m.name}: No changes needed`)}catch(g){console.error(`\u274C Error updating ${m.name}:`,g.message),n++}console.log(`
Update summary:`),console.log(`\u2139\uFE0F Processed: ${l}/${i} plugins`),console.log(`\u2705 Successfully updated: ${e} plugins`),console.log(`\u274C Failed to update: ${n} plugins`),console.groupEnd(),X(),H(`Updated ${e} plugins (${n} failed)`)})}function ye(){let e=D.filter(l=>l.status==="working").length,n=D.filter(l=>l.status==="warning").length,i=D.filter(l=>l.status==="broken").length;wt.textContent=D.length,xt.textContent=e,_t.textContent=n,Lt.textContent=i}function St(e){let n=document.createElement("div");return n.className="card admin-plugin-item",n.innerHTML=`
        <div class="plugin-info">
            <span class="plugin-info-label">Name:</span>
            <span>${e.name||"Unnamed Plugin"}</span>
            
            <span class="plugin-info-label">Status:</span>
            <select class="status-select">
                <option value="working" ${e.status==="working"?"selected":""}>Working</option>
                <option value="warning" ${e.status==="warning"?"selected":""}>Warning</option>
                <option value="broken" ${e.status==="broken"?"selected":""}>Broken</option>
            </select>
            
            <span class="plugin-info-label">Message:</span>
            <textarea class="form-control warning-message">${e.warningMessage||""}</textarea>
        </div>
        <div class="plugin-action-buttons">
            <button class="btn btn--danger admin-button delete-plugin">Delete</button>
            <button class="btn btn--secondary admin-button edit-plugin">
                <span class="material-symbols-rounded">edit</span> Edit Details
            </button>
        </div>
    `,n.querySelector(".status-select").addEventListener("change",i=>{e.status=i.target.value,ye()}),n.querySelector(".warning-message").addEventListener("input",i=>{e.warningMessage=i.target.value}),n.querySelector(".delete-plugin").addEventListener("click",()=>{confirm(`Delete plugin "${e.name}"?`)&&(D=D.filter(i=>i!==e),X(),ye())}),n.querySelector(".edit-plugin").addEventListener("click",()=>{kt(e)}),n}function It(e,n,i){return te(this,null,function*(){var l;try{let v=e.installUrl.endsWith("/")?`${e.installUrl}manifest.json`:`${e.installUrl}/manifest.json`,g=yield(yield fetch(v)).json();switch(n){case"name":e.name=g.name;break;case"description":e.description=g.description;break;case"authors":e.authors=((l=g.authors)==null?void 0:l.map(b=>b.name))||["Unknown"];break;case"sourceUrl":e.sourceUrl=Qe(e.installUrl);break;default:return!1}return!0}catch(v){return console.error(`Error updating ${n}:`,v),!1}})}function kt(e){var i;let n=`
        <div class="plugin-details-form">
            <div class="form-group">
                <label>Name:</label>
                <div class="input-with-button">
                    <input type="text" id="plugin-name" class="form-control" value="${e.name||""}" />
                    <button class="btn btn--secondary admin-button refetch-field" data-field="name">
                        <span class="material-symbols-rounded">refresh</span>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label>Description:</label>
                <div class="input-with-button">
                    <textarea id="plugin-description" class="form-control">${e.description||""}</textarea>
                    <button class="btn btn--secondary admin-button refetch-field" data-field="description">
                        <span class="material-symbols-rounded">refresh</span>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label>Authors:</label>
                <div class="input-with-button">
                    <input type="text" id="plugin-authors" class="form-control" value="${((i=e.authors)==null?void 0:i.join(", "))||""}" />
                    <button class="btn btn--secondary admin-button refetch-field" data-field="authors">
                        <span class="material-symbols-rounded">refresh</span>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label>Install URL:</label>
                <input type="text" id="plugin-install-url" class="form-control" value="${e.installUrl||""}" />
            </div>
            <div class="form-group">
                <label>Source URL:</label>
                <div class="input-with-button">
                    <input type="text" id="plugin-source-url" class="form-control" value="${e.sourceUrl||""}" />
                    <button class="btn btn--secondary admin-button refetch-field" data-field="sourceUrl">
                        <span class="material-symbols-rounded">refresh</span>
                    </button>
                </div>
            </div>
        </div>
    `;Te({title:`Edit Plugin: ${e.name}`,message:n,primaryButton:{text:"Save",action:()=>{e.name=document.getElementById("plugin-name").value,e.description=document.getElementById("plugin-description").value,e.authors=document.getElementById("plugin-authors").value.split(",").map(l=>l.trim()),e.installUrl=document.getElementById("plugin-install-url").value,e.sourceUrl=document.getElementById("plugin-source-url").value,X(),hidePopup(),H("Plugin details updated!")}},closeOnOutsideClick:!0});for(let l of document.querySelectorAll(".refetch-field"))l.addEventListener("click",()=>te(this,null,function*(){let v=l.dataset.field;(yield It(e,v))?(v==="authors"?document.getElementById("plugin-authors").value=e.authors.join(", "):v==="sourceUrl"?document.getElementById("plugin-source-url").value=e.sourceUrl:document.getElementById(`plugin-${v}`).value=e[v],H(`${v} updated successfully!`)):H(`Failed to update ${v}`)}))}function X(){We.innerHTML="";let e=D;le!=="all"&&(e=D.filter(n=>n.status===le));for(let n of e)We.appendChild(St(n))}function $t(){return te(this,null,function*(){try{let e=JSON.stringify(D,null,4),n=yield fetch("http://localhost:3000/save-plugins",{method:"POST",headers:{"Content-Type":"application/json"},body:e});if(!n.ok)throw new Error(`Save failed: ${n.statusText}`);let i=yield n.json();H(i.message||"File saved successfully!")}catch(e){H(`Error saving file: ${e.message}`)}})}ht.addEventListener("submit",e=>te(void 0,null,function*(){var i;e.preventDefault();let n=Je.value.trim();try{let l=n.endsWith("/")?`${n}manifest.json`:`${n}/manifest.json`,m=yield(yield fetch(l)).json(),g={name:m.name,description:m.description,authors:((i=m.authors)==null?void 0:i.map(b=>b.name))||["Unknown"],status:"working",sourceUrl:Qe(n),installUrl:n,warningMessage:""};D.push(g),X(),ye(),Je.value="",H("Plugin added successfully!")}catch(l){H(`Error adding plugin: ${l.message}`)}}));bt.addEventListener("click",$t);yt.addEventListener("click",Et);Fe.classList.add("active");Fe.addEventListener("click",()=>{le="all",X();for(let e of document.querySelectorAll(".admin-button"))e.classList.remove("active");Fe.classList.add("active")});Ge.addEventListener("click",()=>{le="broken",X();for(let e of document.querySelectorAll(".admin-button"))e.classList.remove("active");Ge.classList.add("active")});Ke.addEventListener("click",()=>{le="warning",X();for(let e of document.querySelectorAll(".admin-button"))e.classList.remove("active");Ke.classList.add("active")});Bt();})();
