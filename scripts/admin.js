(()=>{var nt=Object.create;var qe=Object.defineProperty;var rt=Object.getOwnPropertyDescriptor;var at=Object.getOwnPropertyNames;var st=Object.getPrototypeOf,it=Object.prototype.hasOwnProperty;var $e=Math.pow;var ot=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var lt=(e,n,i,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let v of at(n))!it.call(e,v)&&v!==i&&qe(e,v,{get:()=>n[v],enumerable:!(o=rt(n,v))||o.enumerable});return e};var ct=(e,n,i)=>(i=e!=null?nt(st(e)):{},lt(n||!e||!e.__esModule?qe(i,"default",{value:e,enumerable:!0}):i,e));var te=(e,n,i)=>new Promise((o,v)=>{var m=E=>{try{p(i.next(E))}catch(k){v(k)}},g=E=>{try{p(i.throw(E))}catch(k){v(k)}},p=E=>E.done?o(E.value):Promise.resolve(E.value).then(m,g);p((i=i.apply(e,n)).next())});var Oe=ot((De,we)=>{((e,n)=>{typeof define=="function"&&define.amd?define([],n):typeof we=="object"&&we.exports?we.exports=n():e.fuzzysort=n()})(De,e=>{"use strict";var n=(r,t)=>{if(!r||!t)return C;var a=se(r);Z(t)||(t=O(t));var c=a.bitflags;return(c&t._bitflags)!==c?C:V(a,t)},i=(r,t,a)=>{if(!r)return a!=null&&a.all?fe(t,a):Ie;var c=se(r),u=c.bitflags,l=c.containsSpace,s=I((a==null?void 0:a.threshold)||0),f=(a==null?void 0:a.limit)||Ee,d=0,b=0,w=t.length;function N(ee){d<f?(pe.add(ee),++d):(++b,ee._score>pe.peek()._score&&pe.replaceTop(ee))}if(a!=null&&a.key)for(var F=a.key,x=0;x<w;++x){var M=t[x],L=he(M,F);if(L&&(Z(L)||(L=O(L)),(u&L._bitflags)===u)){var B=V(c,L);B!==C&&(B._score<s||(B.obj=M,N(B)))}}else if(a!=null&&a.keys){var G=a.keys,z=G.length;e:for(var x=0;x<w;++x){var M=t[x];{for(var U=0,y=0;y<z;++y){var F=G[y],L=he(M,F);if(!L){Se[y]=ie;continue}Z(L)||(L=O(L)),Se[y]=L,U|=L._bitflags}if((u&U)!==u)continue}if(l)for(let _=0;_<c.spaceSearches.length;_++)W[_]=A;for(var y=0;y<z;++y){if(L=Se[y],L===ie){ae[y]=ie;continue}if(ae[y]=V(c,L,!1,l),ae[y]===C){ae[y]=ie;continue}if(l)for(let S=0;S<c.spaceSearches.length;S++){if(X[S]>-1e3&&W[S]>A){var T=(W[S]+X[S])/4;T>W[S]&&(W[S]=T)}X[S]>W[S]&&(W[S]=X[S])}}if(l){for(let _=0;_<c.spaceSearches.length;_++)if(W[_]===A)continue e}else{var h=!1;for(let _=0;_<z;_++)if(ae[_]._score!==A){h=!0;break}if(!h)continue}var q=new p(z);for(let _=0;_<z;_++)q[_]=ae[_];if(l){var $=0;for(let _=0;_<c.spaceSearches.length;_++)$+=W[_]}else{var $=A;for(let S=0;S<z;S++){var B=q[S];if(B._score>-1e3&&$>A){var T=($+B._score)/4;T>$&&($=T)}B._score>$&&($=B._score)}}if(q.obj=M,q._score=$,a!=null&&a.scoreFn){if($=a.scoreFn(q),!$)continue;$=I($),q._score=$}$<s||N(q)}}else for(var x=0;x<w;++x){var L=t[x];if(L&&(Z(L)||(L=O(L)),(u&L._bitflags)===u)){var B=V(c,L);B!==C&&(B._score<s||N(B))}}if(d===0)return Ie;for(var K=new Array(d),x=d-1;x>=0;--x)K[x]=pe.poll();return K.total=d+b,K},o=(r,t="<b>",a="</b>")=>{for(var c=typeof t=="function"?t:void 0,u=r.target,l=u.length,s=r.indexes,f="",d=0,b=0,w=!1,N=[],F=0;F<l;++F){var x=u[F];if(s[b]===F){if(++b,w||(w=!0,c?(N.push(f),f=""):f+=t),b===s.length){c?(f+=x,N.push(c(f,d++)),f="",N.push(u.substr(F+1))):f+=x+a+u.substr(F+1);break}}else w&&(w=!1,c?(N.push(c(f,d++)),f=""):f+=a);f+=x}return c?N:f},v=r=>{typeof r=="number"?r=""+r:typeof r!="string"&&(r="");var t=Le(r);return E(r,{_targetLower:t._lower,_targetLowerCodes:t.lowerCodes,_bitflags:t.bitflags})},m=()=>{_e.clear(),Be.clear()};class g{get indexes(){return this._indexes.slice(0,this._indexes.len).sort((t,a)=>t-a)}set indexes(t){return this._indexes=t}highlight(t,a){return o(this,t,a)}get score(){return k(this._score)}set score(t){this._score=I(t)}}class p extends Array{get score(){return k(this._score)}set score(t){this._score=I(t)}}var E=(r,t)=>{var c,u,l,s,f,d,b;let a=new g;return a.target=r,a.obj=(c=t.obj)!=null?c:C,a._score=(u=t._score)!=null?u:A,a._indexes=(l=t._indexes)!=null?l:[],a._targetLower=(s=t._targetLower)!=null?s:"",a._targetLowerCodes=(f=t._targetLowerCodes)!=null?f:C,a._nextBeginningIndexes=(d=t._nextBeginningIndexes)!=null?d:C,a._bitflags=(b=t._bitflags)!=null?b:0,a},k=r=>r===A?0:r>1?r:$e(Math.E,($e(-r+1,.04307)-1)*-2),I=r=>r===0?A:r>1?r:1-Math.pow(Math.log(r)/-2+1,1/.04307),P=r=>{typeof r=="number"?r=""+r:typeof r!="string"&&(r=""),r=r.trim();var t=Le(r),a=[];if(t.containsSpace){var c=r.split(/\s+/);c=[...new Set(c)];for(var u=0;u<c.length;u++)if(c[u]!==""){var l=Le(c[u]);a.push({lowerCodes:l.lowerCodes,_lower:c[u].toLowerCase(),containsSpace:!1})}}return{lowerCodes:t.lowerCodes,_lower:t._lower,containsSpace:t.containsSpace,bitflags:t.bitflags,spaceSearches:a}},O=r=>{if(r.length>999)return v(r);var t=_e.get(r);return t!==void 0||(t=v(r),_e.set(r,t)),t},se=r=>{if(r.length>999)return P(r);var t=Be.get(r);return t!==void 0||(t=P(r),Be.set(r,t)),t},fe=(r,t)=>{var a=[];a.total=r.length;var c=(t==null?void 0:t.limit)||Ee;if(t!=null&&t.key)for(var u=0;u<r.length;u++){var l=r[u],s=he(l,t.key);if(s!=C){Z(s)||(s=O(s));var f=E(s.target,{_score:s._score,obj:l});if(a.push(f),a.length>=c)return a}}else if(t!=null&&t.keys)for(var u=0;u<r.length;u++){for(var l=r[u],d=new p(t.keys.length),b=t.keys.length-1;b>=0;--b){var s=he(l,t.keys[b]);if(!s){d[b]=ie;continue}Z(s)||(s=O(s)),s._score=A,s._indexes.len=0,d[b]=s}if(d.obj=l,d._score=A,a.push(d),a.length>=c)return a}else for(var u=0;u<r.length;u++){var s=r[u];if(s!=C&&(Z(s)||(s=O(s)),s._score=A,s._indexes.len=0,a.push(s),a.length>=c))return a}return a},V=(r,t,a=!1,c=!1)=>{if(a===!1&&r.containsSpace)return ve(r,t,c);for(var u=r._lower,l=r.lowerCodes,s=l[0],f=t._targetLowerCodes,d=l.length,b=f.length,x=0,w=0,N=0;;){var F=s===f[w];if(F){if(Y[N++]=w,++x,x===d)break;s=l[x]}if(++w,w>=b)return C}var x=0,M=!1,L=0,B=t._nextBeginningIndexes;B===C&&(B=t._nextBeginningIndexes=Ze(t.target)),w=Y[0]===0?0:B[Y[0]-1];var G=0;if(w!==b)for(;;)if(w>=b){if(x<=0||(++G,G>200))break;--x;var z=ge[--L];w=B[z]}else{var F=l[x]===f[w];if(F){if(ge[L++]=w,++x,x===d){M=!0;break}++w}else w=B[w]}var U=d<=1?-1:t._targetLower.indexOf(u,Y[0]),y=!!~U,T=y?U===0||t._nextBeginningIndexes[U-1]===U:!1;if(y&&!T){for(var h=0;h<B.length;h=B[h])if(!(h<=U)){for(var q=0;q<d&&l[q]===t._targetLowerCodes[h+q];q++);if(q===d){U=h,T=!0;break}}}var $=_=>{for(var S=0,Ae=0,J=1;J<d;++J)_[J]-_[J-1]!==1&&(S-=_[J],++Ae);var tt=_[d-1]-_[0]-(d-1);if(S-=(12+tt)*Ae,_[0]!==0&&(S-=_[0]*_[0]*.2),!M)S*=1e3;else{for(var ke=1,J=B[0];J<b;J=B[J])++ke;ke>24&&(S*=(ke-24)*10)}return S-=(b-d)/2,y&&(S/=1+d*d*1),T&&(S/=1+d*d*1),S-=(b-d)/2,S};if(M)if(T){for(var h=0;h<d;++h)Y[h]=U+h;var K=Y,ee=$(Y)}else var K=ge,ee=$(ge);else{if(y)for(var h=0;h<d;++h)Y[h]=U+h;var K=Y,ee=$(K)}t._score=ee;for(var h=0;h<d;++h)t._indexes[h]=K[h];t._indexes.len=d;let be=new g;return be.target=t.target,be._score=t._score,be._indexes=t._indexes,be},ve=(r,t,a)=>{for(var c=new Set,u=0,l=C,s=0,f=r.spaceSearches,d=f.length,b=0,w=()=>{for(let T=b-1;T>=0;T--)t._nextBeginningIndexes[me[T*2+0]]=me[T*2+1]},N=!1,y=0;y<d;++y){X[y]=A;var F=f[y];if(l=V(F,t),a){if(l===C)continue;N=!0}else if(l===C)return w(),C;var x=y===d-1;if(!x){var M=l._indexes,L=!0;for(let h=0;h<M.len-1;h++)if(M[h+1]-M[h]!==1){L=!1;break}if(L){var B=M[M.len-1]+1,G=t._nextBeginningIndexes[B-1];for(let h=B-1;h>=0&&G===t._nextBeginningIndexes[h];h--)t._nextBeginningIndexes[h]=B,me[b*2+0]=h,me[b*2+1]=G,b++}}u+=l._score/d,X[y]=l._score/d,l._indexes[0]<s&&(u-=(s-l._indexes[0])*2),s=l._indexes[0];for(var z=0;z<l._indexes.len;++z)c.add(l._indexes[z])}if(a&&!N)return C;w();var U=V(r,t,!0);if(U!==C&&U._score>u){if(a)for(var y=0;y<d;++y)X[y]=U._score/d;return U}a&&(l=t),l._score=u;var y=0;for(let T of c)l._indexes[y++]=T;return l._indexes.len=y,l},Ne=r=>r.replace(new RegExp("\\p{Script=Latin}+","gu"),t=>t.normalize("NFD")).replace(/[\u0300-\u036f]/g,""),Le=r=>{r=Ne(r);for(var t=r.length,a=r.toLowerCase(),c=[],u=0,l=!1,s=0;s<t;++s){var f=c[s]=a.charCodeAt(s);if(f===32){l=!0;continue}var d=f>=97&&f<=122?f-97:f>=48&&f<=57?26:f<=127?30:31;u|=1<<d}return{lowerCodes:c,bitflags:u,containsSpace:l,_lower:a}},Xe=r=>{for(var t=r.length,a=[],c=0,u=!1,l=!1,s=0;s<t;++s){var f=r.charCodeAt(s),d=f>=65&&f<=90,b=d||f>=97&&f<=122||f>=48&&f<=57,w=d&&!u||!l||!b;u=d,l=b,w&&(a[c++]=s)}return a},Ze=r=>{r=Ne(r);for(var t=r.length,a=Xe(r),c=[],u=a[0],l=0,s=0;s<t;++s)u>s?c[s]=u:(u=a[++l],c[s]=u===void 0?t:u);return c},_e=new Map,Be=new Map,Y=[],ge=[],me=[],W=[],X=[],Se=[],ae=[],he=(r,t)=>{var a=r[t];if(a!==void 0)return a;if(typeof t=="function")return t(r);var c=t;Array.isArray(t)||(c=t.split("."));for(var u=c.length,l=-1;r&&++l<u;)r=r[c[l]];return r},Z=r=>typeof r=="object"&&typeof r._bitflags=="number",Ee=1/0,A=-Ee,Ie=[];Ie.total=0;var C=null,ie=v(""),et=r=>{var t=[],a=0,c={},u=l=>{for(var s=0,f=t[s],d=1;d<a;){var b=d+1;s=d,b<a&&t[b]._score<t[d]._score&&(s=b),t[s-1>>1]=t[s],d=1+(s<<1)}for(var w=s-1>>1;s>0&&f._score<t[w]._score;w=(s=w)-1>>1)t[s]=t[w];t[s]=f};return c.add=l=>{var s=a;t[a++]=l;for(var f=s-1>>1;s>0&&l._score<t[f]._score;f=(s=f)-1>>1)t[s]=t[f];t[s]=l},c.poll=l=>{if(a!==0){var s=t[0];return t[0]=t[--a],u(),s}},c.peek=l=>{if(a!==0)return t[0]},c.replaceTop=l=>{t[0]=l,u()},c},pe=et();return{single:n,go:i,prepare:v,cleanup:m}})});var He=ct(Oe(),1),ut=150,ne={currentValue:"",wasCleared:!1},H={searchBar:document.getElementById("search-bar"),fixedSearchBar:document.getElementById("fixedSearchBar"),clearButton:document.getElementById("clearSearch"),clearButtonFixed:document.getElementById("clearFixedSearch"),searchButton:document.getElementById("searchButton"),container:document.getElementById("plugins-container")||document.getElementById("plugins-list"),featuredPluginContainer:document.getElementById("featured-plugin-container")},Q=[];function dt(e,n){let i;return(...o)=>(clearTimeout(i),new Promise(v=>{i=setTimeout(()=>v(e(...o)),n)}))}function oe(e){return e?e.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g," ").trim():""}function ue(e){var k;let n=H.container.id==="plugins-list",i=n?"admin-plugin-item":"plugin-card",o=Array.from(H.container.getElementsByClassName(i));(Q.length===0||Q.length!==o.length||Q.length>0&&!Q[0].element.isConnected)&&(Q=o.map(I=>{var O,se,fe,V,ve;let P={element:I};return n?(P.name=oe((O=I.querySelector(".plugin-info span:nth-child(2)"))==null?void 0:O.textContent),P.warningMessage=(se=I.querySelector(".warning-message"))==null?void 0:se.value):(P.name=oe((fe=I.querySelector(".plugin-name"))==null?void 0:fe.textContent),P.description=oe((V=I.querySelector(".plugin-description"))==null?void 0:V.textContent),P.author=oe((ve=I.querySelector(".plugin-author"))==null?void 0:ve.textContent)),P}));let m=oe(e);if(!m){for(let{element:I}of Q)I.style.display=n?"block":"flex";if(!n)(k=window.renderPlugins)==null||k.call(window);else for(let I of o)H.container.appendChild(I);ze("",o.length);return}let g=n?["name","warningMessage"]:["name","author","description"],p=He.default.go(m,Q,{keys:g});for(let{element:I}of Q)I.style.display="none";let E=[];for(let I of p){let{element:P}=I.obj;P.style.display=n?"block":"flex",H.container.appendChild(P),E.push(P)}ze(e,E.length)}function ze(e,n){let i=document.getElementById("searchSubtext");if(!i)return;if(!e){i.textContent="",i.classList.remove("visible");return}let o=typeof n=="number"?n:n.filter(m=>m.style.display!=="none").length,v=`Found ${o} matching plugin${o===1?"":"s"}`;i.textContent=v,i.classList.add("visible")}function Ce(e){if(H.featuredPluginContainer){let n=H.featuredPluginContainer.querySelector(".featured-plugin-card");n&&e&&e.trim()!==""&&n.classList.contains("expanded")&&n.classList.remove("expanded")}}function ft(){let{searchBar:e,fixedSearchBar:n,clearButton:i,clearButtonFixed:o}=H,v=g=>{let p=g.target.value;ne.currentValue=p,ne.wasCleared=!1,gt(p),ce(g.target,p);let E=g.target===e?n:e;E&&(E.value=p,ce(E,p)),Ce(p);let k=new URL(window.location);p?k.searchParams.set("q",p):k.searchParams.delete("q"),window.history.replaceState({},"",k)};for(let g of[e,n])g&&g.addEventListener("input",v);let m=g=>{ne.currentValue="",ne.wasCleared=!0;for(let E of[e,n])E&&(E.value="",ce(E,""));ue(""),Ce(""),g&&g.focus();let p=new URL(window.location);p.searchParams.delete("q"),window.history.replaceState({},"",p)};for(let{button:g,input:p}of[{button:i,input:e},{button:o,input:n}])g&&g.addEventListener("click",()=>m(p))}function ce(e,n){let i=H[e.id==="search-bar"?"clearButton":"clearButtonFixed"];if(!i)return;let o=n.length>0&&(e.id!=="fixedSearchBar"||e.classList.contains("show"));i.style.display=o?"block":"none"}function vt(){let{searchButton:e,fixedSearchBar:n,clearButtonFixed:i}=H;e==null||e.addEventListener("click",()=>{let o=n.classList.contains("hidden");n.classList.toggle("hidden",!o),n.classList.toggle("show",o),o?(n.focus(),i.style.display=n.value.length>0?"block":"none"):i.style.display="none"})}var le=document.getElementById("fixedSearchBar");le&&(le.addEventListener("focus",()=>{le.dataset.isFocused="true"}),le.addEventListener("blur",()=>{le.dataset.isFocused="false"}));var je=()=>{var e;return((e=document.getElementById("fixedSearchBar"))==null?void 0:e.dataset.isFocused)==="true"};function Ve(){let n=new URLSearchParams(window.location.search).get("q");if(n){let{searchBar:i,fixedSearchBar:o}=H;ne.currentValue=n,i&&(i.value=n,ce(i,n)),o&&(o.value=n,ce(o,n)),ue(n),Ce(n)}}var gt=dt(ue,ut);document.addEventListener("DOMContentLoaded",()=>{ft(),vt()});var Ye=window.scrollY,re=document.querySelector(".fixed-banner"),ye=document.getElementById("backToTopButton"),Pe=document.getElementById("menuButton"),Te=document.getElementById("dropdownMenu");function We(){if(!re)return;let e=15,n=window.scrollY,i=n>Ye;Ye=n;let o=n>e&&!re.classList.contains("show"),v=n<=e&&re.classList.contains("show")&&!je()&&!i;o?(re.classList.add("show"),re.classList.remove("hide")):v&&(re.classList.add("hide"),re.classList.remove("show"))}ye&&(window.addEventListener("scroll",()=>{window.scrollY>300?ye.classList.add("show"):ye.classList.remove("show")}),ye.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}));document.addEventListener("DOMContentLoaded",()=>{Pe.addEventListener("click",()=>{Te.classList.toggle("visible")}),window.addEventListener("click",e=>{e.target!==Pe&&!Pe.contains(e.target)&&!Te.contains(e.target)&&Te.classList.remove("visible")})});function j(e){let n=document.getElementById("toast");n.innerHTML=e,n.classList.add("show"),setTimeout(()=>n.classList.remove("show"),2e3)}function Ue({title:e,message:n,infoBox:i=null,primaryButton:o={text:"OK",action:()=>Fe()},secondaryButton:v={text:"Cancel",action:()=>Fe()},closeOnOutsideClick:m=!0}){let g=document.getElementById("custom-popup");g||(g=document.createElement("div"),g.id="custom-popup",g.classList.add("popup-container"),document.body.appendChild(g)),g.innerHTML=`
        <div class="card popup-content">
            <div class="popup-title">${e}</div>
            <div class="popup-message">${n}</div>
            ${i?`<div class="popup-info-box">${i.replace(/\n/g,"<br>")}</div>`:""}
            <div class="popup-buttons">
                ${v?`<button class="btn btn--secondary popup-secondary-button" id="popup-secondary-btn">${v.text}</button>`:""}
                <button class="btn btn--primary popup-primary-button" id="popup-primary-btn">${o.text}</button>
            </div>
        </div>
    `,document.getElementById("popup-primary-btn").addEventListener("click",p=>{p.stopPropagation(),o.action()}),v&&document.getElementById("popup-secondary-btn").addEventListener("click",p=>{p.stopPropagation(),v.action()}),m&&(g.querySelector(".popup-content").addEventListener("click",p=>{p.stopPropagation()}),g.addEventListener("click",()=>{Fe()})),g.style.display="flex",window.hidePopup=()=>{g.style.display="none"}}function Fe(){let e=document.getElementById("custom-popup");e&&(e.style.display="none")}function mt(){window.location.href.toLowerCase().includes("purple-eyez.github.io/plugins-list")&&Ue({title:"Migration Notice",message:"This website is moving to a new address!",primaryButton:{text:"Take Me There",action:()=>{window.location.href="https://plugins-list.pages.dev/"}},secondaryButton:null,closeOnOutsideClick:!1})}function ht(){We(),window.addEventListener("scroll",We)}window.onload=()=>{mt(),ht()};var pt="../plugins-data.json",D=[],de="all",Je=document.getElementById("plugins-list"),bt=document.getElementById("add-plugin-form"),Ge=document.getElementById("new-plugin-url"),wt=document.getElementById("save-changes"),yt=document.getElementById("check-plugins"),Me=document.getElementById("filter-all"),Ke=document.getElementById("filter-broken"),Qe=document.getElementById("filter-warning"),xt=document.getElementById("total-count"),Lt=document.getElementById("working-count"),_t=document.getElementById("warning-count"),Bt=document.getElementById("broken-count");function St(){return te(this,null,function*(){try{D=yield(yield fetch(pt)).json(),R(),xe(),Ve()}catch(e){j(`Error loading plugins: ${e.message}`)}})}function Re(e){if(e=e.replace(/\/$/,""),e.includes("/proxy/")){let n=e.split("/proxy/")[1];if(n){let i=n.match(/([^.]+)\.github\.io\/([^/]+)/);if(i){let[,v,m]=i;return`https://github.com/${v}/${m}`}let o=n.match(/raw\.githubusercontent\.com\/([^/]+)\/([^/]+)/);if(o){let[,v,m]=o;return`https://github.com/${v}/${m}`}}}if(e.includes("github.io")){let n=e.match(/https?:\/\/([^.]+)\.github\.io\/([^/]+)/);if(n){let[,i,o]=n;return`https://github.com/${i}/${o}`}}if(e.includes("raw.githubusercontent.com")){let n=e.match(/https?:\/\/raw\.githubusercontent\.com\/([^/]+)\/([^/]+)/);if(n){let[,i,o]=n;return`https://github.com/${i}/${o}`}}return e}function Et(){return te(this,null,function*(){var v;console.group("Updating plugin manifests...");let e=0,n=0,i=D.length,o=0;for(let m of D)try{let g=m.installUrl,p=g.endsWith("/")?`${g}manifest.json`:`${g}/manifest.json`;console.log(`Fetching manifest for ${m.name}... (${++o}/${i})`);let E=yield fetch(p);if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);let k=yield E.json(),I=[];k.name!==m.name&&(I.push(`name: ${m.name} -> ${k.name}`),m.name=k.name),k.description!==m.description&&(I.push("description updated"),m.description=k.description);let P=((v=k.authors)==null?void 0:v.map(O=>O.name))||["Unknown"];JSON.stringify(P)!==JSON.stringify(m.authors)&&(I.push(`authors: [${m.authors}] -> [${P}]`),m.authors=P),I.length>0?(console.log(`\u2705 ${m.name}: Updated! Changes:`,I),e++):console.log(`\u2139\uFE0F ${m.name}: No changes needed`)}catch(g){console.error(`\u274C Error updating ${m.name}:`,g.message),n++}console.log(`
Update summary:`),console.log(`\u2139\uFE0F Processed: ${o}/${i} plugins`),console.log(`\u2705 Successfully updated: ${e} plugins`),console.log(`\u274C Failed to update: ${n} plugins`),console.groupEnd(),R(),j(`Updated ${e} plugins (${n} failed)`)})}function xe(){let e=D.filter(o=>o.status==="working").length,n=D.filter(o=>o.status==="warning").length,i=D.filter(o=>o.status==="broken").length;xt.textContent=D.length,Lt.textContent=e,_t.textContent=n,Bt.textContent=i}function It(e){let n=document.createElement("div");return n.className="card admin-plugin-item",n.innerHTML=`
        <div class="plugin-info">
            <span class="plugin-info-label">Name:</span>
            <span>${e.name||"Unnamed Plugin"}</span>
            
            <span class="plugin-info-label">Status:</span>
            <select class="status-select">
                <option value="working" ${e.status==="working"?"selected":""}>Working</option>
                <option value="warning" ${e.status==="warning"?"selected":""}>Warning</option>
                <option value="broken" ${e.status==="broken"?"selected":""}>Broken</option>
            </select>
            
            <span class="plugin-info-label">Message:</span>
            <textarea class="form-control warning-message">${e.warningMessage||""}</textarea>
        </div>
        <div class="plugin-action-buttons">
            <button class="btn btn--danger admin-button delete-plugin">Delete</button>
            <button class="btn btn--secondary admin-button edit-plugin">
                <span class="material-symbols-rounded">edit</span> Edit Details
            </button>
        </div>
    `,n.querySelector(".status-select").addEventListener("change",i=>{e.status=i.target.value,xe()}),n.querySelector(".warning-message").addEventListener("input",i=>{e.warningMessage=i.target.value}),n.querySelector(".delete-plugin").addEventListener("click",()=>{confirm(`Delete plugin "${e.name}"?`)&&(D=D.filter(i=>i!==e),R(),xe())}),n.querySelector(".edit-plugin").addEventListener("click",()=>{$t(e)}),n}function kt(e,n,i){return te(this,null,function*(){var o;try{let v=e.installUrl.endsWith("/")?`${e.installUrl}manifest.json`:`${e.installUrl}/manifest.json`,g=yield(yield fetch(v)).json();switch(n){case"name":e.name=g.name;break;case"description":e.description=g.description;break;case"authors":e.authors=((o=g.authors)==null?void 0:o.map(p=>p.name))||["Unknown"];break;case"sourceUrl":e.sourceUrl=Re(e.installUrl);break;default:return!1}return!0}catch(v){return console.error(`Error updating ${n}:`,v),!1}})}function $t(e){var i;let n=`
        <div class="plugin-details-form">
            <div class="form-group">
                <label>Name:</label>
                <div class="input-with-button">
                    <input type="text" id="plugin-name" class="form-control" value="${e.name||""}" />
                    <button class="btn btn--secondary admin-button refetch-field" data-field="name">
                        <span class="material-symbols-rounded">refresh</span>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label>Description:</label>
                <div class="input-with-button">
                    <textarea id="plugin-description" class="form-control">${e.description||""}</textarea>
                    <button class="btn btn--secondary admin-button refetch-field" data-field="description">
                        <span class="material-symbols-rounded">refresh</span>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label>Authors:</label>
                <div class="input-with-button">
                    <input type="text" id="plugin-authors" class="form-control" value="${((i=e.authors)==null?void 0:i.join(", "))||""}" />
                    <button class="btn btn--secondary admin-button refetch-field" data-field="authors">
                        <span class="material-symbols-rounded">refresh</span>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label>Install URL:</label>
                <input type="text" id="plugin-install-url" class="form-control" value="${e.installUrl||""}" />
            </div>
            <div class="form-group">
                <label>Source URL:</label>
                <div class="input-with-button">
                    <input type="text" id="plugin-source-url" class="form-control" value="${e.sourceUrl||""}" />
                    <button class="btn btn--secondary admin-button refetch-field" data-field="sourceUrl">
                        <span class="material-symbols-rounded">refresh</span>
                    </button>
                </div>
            </div>
        </div>
    `;Ue({title:`Edit Plugin: ${e.name}`,message:n,primaryButton:{text:"Save",action:()=>{e.name=document.getElementById("plugin-name").value,e.description=document.getElementById("plugin-description").value,e.authors=document.getElementById("plugin-authors").value.split(",").map(o=>o.trim()),e.installUrl=document.getElementById("plugin-install-url").value,e.sourceUrl=document.getElementById("plugin-source-url").value,R(),hidePopup(),j("Plugin details updated!")}},closeOnOutsideClick:!0});for(let o of document.querySelectorAll(".refetch-field"))o.addEventListener("click",()=>te(this,null,function*(){let v=o.dataset.field;(yield kt(e,v))?(v==="authors"?document.getElementById("plugin-authors").value=e.authors.join(", "):v==="sourceUrl"?document.getElementById("plugin-source-url").value=e.sourceUrl:document.getElementById(`plugin-${v}`).value=e[v],j(`${v} updated successfully!`)):j(`Failed to update ${v}`)}))}function R(){Je.innerHTML="";let e=D;de!=="all"&&(e=D.filter(n=>n.status===de));for(let n of e)Je.appendChild(It(n));ue(ne.currentValue)}function Ct(){return te(this,null,function*(){try{let e=JSON.stringify(D,null,4),n=yield fetch("http://localhost:3000/save-plugins",{method:"POST",headers:{"Content-Type":"application/json"},body:e});if(!n.ok)throw new Error(`Save failed: ${n.statusText}`);let i=yield n.json();j(i.message||"File saved successfully!")}catch(e){j(`Error saving file: ${e.message}`)}})}bt.addEventListener("submit",e=>te(void 0,null,function*(){var i;e.preventDefault();let n=Ge.value.trim();try{let o=n.endsWith("/")?`${n}manifest.json`:`${n}/manifest.json`,m=yield(yield fetch(o)).json(),g={name:m.name,description:m.description,authors:((i=m.authors)==null?void 0:i.map(p=>p.name))||["Unknown"],status:"working",sourceUrl:Re(n),installUrl:n,warningMessage:""};D.push(g),R(),xe(),Ge.value="",j("Plugin added successfully!")}catch(o){j(`Error adding plugin: ${o.message}`)}}));wt.addEventListener("click",Ct);yt.addEventListener("click",Et);Me.classList.add("active");Me.addEventListener("click",()=>{de="all",R();for(let e of document.querySelectorAll(".admin-button"))e.classList.remove("active");Me.classList.add("active")});Ke.addEventListener("click",()=>{de="broken",R();for(let e of document.querySelectorAll(".admin-button"))e.classList.remove("active");Ke.classList.add("active")});Qe.addEventListener("click",()=>{de="warning",R();for(let e of document.querySelectorAll(".admin-button"))e.classList.remove("active");Qe.classList.add("active")});St();})();
